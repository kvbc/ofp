<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OFP: Text to Number</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ofp3.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OFP
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Option and Flag Parser</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('text_to_number.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Text to Number </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A little example of the <a class="el" href="option_8c.html#a3c103790c48ae98fc3c06b07150d0099">ofp_option_enumval</a> function and error handling.</p>
<blockquote class="doxtable">
<p><code>Usage: &lt;exe&gt; /txt &lt;one-ten&gt;</code> </p>
</blockquote>
<div class="fragment"><div class="line"><span class="comment">/* OFP headers */</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="ofp_8h.html">ofp.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="error_8h.html">error.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="state_8h.html">state.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* C headers */</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * UDA error handling</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> arg_error (ofp_argument *arg, ofp_errorcode ec)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;ofp: error for arg \&quot;%s\&quot;: &quot;</span>, arg-&gt;id);</div>
<div class="line">    <span class="keywordflow">switch</span>(ec)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="error_8h.html#a14dbda419d8385fc6afcda74596212df">OFP_ERR_ARG_REQ</a>:</div>
<div class="line">        printf(<span class="stringliteral">&quot;argument required&quot;</span>);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="error_8h.html#abc6878c78ecc3f961eaca0c254876972">OFP_ERR_ARG_NOVAL</a>:</div>
<div class="line">        printf(<span class="stringliteral">&quot;argument requires value&quot;</span>);</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    puts(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Main program entry</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Allocate a new state with the following properites:</span></div>
<div class="line"><span class="comment">     * default parsing priority : last</span></div>
<div class="line"><span class="comment">     * maximum argument count   : 1</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    ofp_state *S = <a class="code" href="ofp_8h.html#a8d0ded6af241b50b21d8016e42d2fff8">ofp_state_new</a>(argv + 1, argc - 1, OFP_ARG_PRTY_LAST, 1);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Allocating the state has failed,</span></div>
<div class="line"><span class="comment">     * handle an fatal &quot;out of memory&quot; error</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span>(S == NULL)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;ofp: fatal error: out of memory&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* UDA &quot;txt&quot; */</span></div>
<div class="line">    ofp_argument *arg_txt;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * In case of an fatal error,</span></div>
<div class="line"><span class="comment">     * output the error code and</span></div>
<div class="line"><span class="comment">     * clean up the application</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <a class="code" href="ofp_8h.html#a4518ace88daadfa8f25d07657b626068">ofp_on_ferror</a>(S)</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;ofp: fatal error: 0x%02X\n&quot;</span>, S-&gt;ferr);</div>
<div class="line">        <span class="keywordflow">goto</span> clean_up;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Register an new argument for the state &quot;S&quot; with the following properties:</span></div>
<div class="line"><span class="comment">     * arg type          : double-argument option</span></div>
<div class="line"><span class="comment">     * parsing priority  : first</span></div>
<div class="line"><span class="comment">     * required          : yes</span></div>
<div class="line"><span class="comment">     * error function    : &quot;arg_error&quot;</span></div>
<div class="line"><span class="comment">     * identifier        : &quot;txt&quot;</span></div>
<div class="line"><span class="comment">     * identifier length : 3</span></div>
<div class="line"><span class="comment">     * description       : none</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    arg_txt = <a class="code" href="argument_8c.html#a2b673bfb5b01aeaf2481ca17c7b3a7fd">ofp_argument_register</a>(S, <a class="code" href="argument_8h.html#ad22adb24f9b8fa87fc7f048eed87646a">OFP_ARG_TYPE_DUIA_OPTION</a>, <a class="code" href="argument_8h.html#ab68f8cfe6e00fb54c079b41b5d374047">OFP_ARG_PRTY_FIRST</a>, OFP_ARG_REQUIRED, arg_error, <span class="stringliteral">&quot;txt&quot;</span>, 3, NULL);</div>
<div class="line">    <a class="code" href="ofp_8h.html#aa0cf6c2c7523bf985d8ebccf4bd9e82f">ofp_parser_parse</a>(S);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * If any error has been</span></div>
<div class="line"><span class="comment">     * encountered, print the usage</span></div>
<div class="line"><span class="comment">     * and clean up the application</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="ofp_8h.html#acc792b8f3e75c8e6bfeaf87b356f0335">ofp_any_error</a>(S))</div>
<div class="line">    {</div>
<div class="line">        printf(<span class="stringliteral">&quot;usage: %s /txt &lt;one-ten&gt;&quot;</span>, *argv);</div>
<div class="line">        <span class="keywordflow">goto</span> clean_up;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * There are no errors,</span></div>
<div class="line"><span class="comment">     * print the input and</span></div>
<div class="line"><span class="comment">     * return the &quot;enumval&quot; of arg &quot;txt&quot;</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;input: %s\n&quot;</span>, arg_txt-&gt;v.o);</div>
<div class="line">    printf(<span class="stringliteral">&quot;output: %d\n&quot;</span>,</div>
<div class="line">        <a class="code" href="ofp_8h.html#a470e266130f42408ac37e97d2ae86693">ofp_option_enumval</a>(arg_txt, 10,</div>
<div class="line">                           <span class="stringliteral">&quot;zero&quot;</span>,  4, 0,</div>
<div class="line">                           <span class="stringliteral">&quot;one&quot;</span>,   3, 1,</div>
<div class="line">                           <span class="stringliteral">&quot;two&quot;</span>,   3, 2,</div>
<div class="line">                           <span class="stringliteral">&quot;three&quot;</span>, 5, 3,</div>
<div class="line">                           <span class="stringliteral">&quot;four&quot;</span>,  4, 4,</div>
<div class="line">                           <span class="stringliteral">&quot;five&quot;</span>,  4, 5,</div>
<div class="line">                           <span class="stringliteral">&quot;six&quot;</span>,   3, 6,</div>
<div class="line">                           <span class="stringliteral">&quot;seven&quot;</span>, 5, 7,</div>
<div class="line">                           <span class="stringliteral">&quot;eight&quot;</span>, 5, 8,</div>
<div class="line">                           <span class="stringliteral">&quot;nine&quot;</span>,  4, 9,</div>
<div class="line">                           <span class="stringliteral">&quot;ten&quot;</span>,   3, 10));</div>
<div class="line"> </div>
<div class="line">clean_up:</div>
<div class="line">    <a class="code" href="ofp_8h.html#a008b322ca491ce11390df6fbba92cab0">ofp_state_free</a>(S);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line">}</div>
<div class="ttc" id="aargument_8c_html_a2b673bfb5b01aeaf2481ca17c7b3a7fd"><div class="ttname"><a href="argument_8c.html#a2b673bfb5b01aeaf2481ca17c7b3a7fd">ofp_argument_register</a></div><div class="ttdeci">ofp_argument * ofp_argument_register(ofp_state *S, ofp_argument_type t, ofp_argument_priority prty, int r, ofp_Cfunction ef, char *id, ofp_uint len, char *desc)</div><div class="ttdef"><b>Definition:</b> argument.c:31</div></div>
<div class="ttc" id="aargument_8h_html_ab68f8cfe6e00fb54c079b41b5d374047"><div class="ttname"><a href="argument_8h.html#ab68f8cfe6e00fb54c079b41b5d374047">OFP_ARG_PRTY_FIRST</a></div><div class="ttdeci">OFP_ARG_PRTY_FIRST</div><div class="ttdoc">First appearance.</div><div class="ttdef"><b>Definition:</b> argument.h:20</div></div>
<div class="ttc" id="aargument_8h_html_ad22adb24f9b8fa87fc7f048eed87646a"><div class="ttname"><a href="argument_8h.html#ad22adb24f9b8fa87fc7f048eed87646a">OFP_ARG_TYPE_DUIA_OPTION</a></div><div class="ttdeci">OFP_ARG_TYPE_DUIA_OPTION</div><div class="ttdoc">Double-UIA option.</div><div class="ttdef"><b>Definition:</b> argument.h:28</div></div>
<div class="ttc" id="aerror_8h_html"><div class="ttname"><a href="error_8h.html">error.h</a></div><div class="ttdoc">Error handling.</div></div>
<div class="ttc" id="aerror_8h_html_a14dbda419d8385fc6afcda74596212df"><div class="ttname"><a href="error_8h.html#a14dbda419d8385fc6afcda74596212df">OFP_ERR_ARG_REQ</a></div><div class="ttdeci">OFP_ERR_ARG_REQ</div><div class="ttdoc">argument required</div><div class="ttdef"><b>Definition:</b> error.h:22</div></div>
<div class="ttc" id="aerror_8h_html_abc6878c78ecc3f961eaca0c254876972"><div class="ttname"><a href="error_8h.html#abc6878c78ecc3f961eaca0c254876972">OFP_ERR_ARG_NOVAL</a></div><div class="ttdeci">OFP_ERR_ARG_NOVAL</div><div class="ttdoc">argument has no value</div><div class="ttdef"><b>Definition:</b> error.h:23</div></div>
<div class="ttc" id="aofp_8h_html"><div class="ttname"><a href="ofp_8h.html">ofp.h</a></div><div class="ttdoc">OFP Environment.</div></div>
<div class="ttc" id="aofp_8h_html_a008b322ca491ce11390df6fbba92cab0"><div class="ttname"><a href="ofp_8h.html#a008b322ca491ce11390df6fbba92cab0">ofp_state_free</a></div><div class="ttdeci">OFP_API void ofp_state_free(ofp_state *S)</div><div class="ttdef"><b>Definition:</b> state.c:85</div></div>
<div class="ttc" id="aofp_8h_html_a4518ace88daadfa8f25d07657b626068"><div class="ttname"><a href="ofp_8h.html#a4518ace88daadfa8f25d07657b626068">ofp_on_ferror</a></div><div class="ttdeci">#define ofp_on_ferror(S)</div><div class="ttdoc">Define behaviour for handling fatal errors.</div><div class="ttdef"><b>Definition:</b> ofp.h:35</div></div>
<div class="ttc" id="aofp_8h_html_a470e266130f42408ac37e97d2ae86693"><div class="ttname"><a href="ofp_8h.html#a470e266130f42408ac37e97d2ae86693">ofp_option_enumval</a></div><div class="ttdeci">OFP_API int ofp_option_enumval(ofp_argument *arg, ofp_uint count,...)</div><div class="ttdef"><b>Definition:</b> option.c:42</div></div>
<div class="ttc" id="aofp_8h_html_a8d0ded6af241b50b21d8016e42d2fff8"><div class="ttname"><a href="ofp_8h.html#a8d0ded6af241b50b21d8016e42d2fff8">ofp_state_new</a></div><div class="ttdeci">OFP_API ofp_state * ofp_state_new(char **argv, int argc, ofp_argument_priority prty, ofp_uint maxuda)</div><div class="ttdef"><b>Definition:</b> state.c:34</div></div>
<div class="ttc" id="aofp_8h_html_aa0cf6c2c7523bf985d8ebccf4bd9e82f"><div class="ttname"><a href="ofp_8h.html#aa0cf6c2c7523bf985d8ebccf4bd9e82f">ofp_parser_parse</a></div><div class="ttdeci">OFP_API void ofp_parser_parse(ofp_state *S)</div><div class="ttdef"><b>Definition:</b> parser.c:93</div></div>
<div class="ttc" id="aofp_8h_html_acc792b8f3e75c8e6bfeaf87b356f0335"><div class="ttname"><a href="ofp_8h.html#acc792b8f3e75c8e6bfeaf87b356f0335">ofp_any_error</a></div><div class="ttdeci">#define ofp_any_error(S)</div><div class="ttdoc">Return a flag that indicates if there's any errors.</div><div class="ttdef"><b>Definition:</b> ofp.h:42</div></div>
<div class="ttc" id="astate_8h_html"><div class="ttname"><a href="state_8h.html">state.h</a></div><div class="ttdoc">OFP State.</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
